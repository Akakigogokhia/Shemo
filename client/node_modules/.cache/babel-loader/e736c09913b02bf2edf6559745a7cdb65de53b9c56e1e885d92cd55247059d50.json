{"ast":null,"code":"import _toConsumableArray from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import Header from'../../components/header/Header';import Conversation from'../../components/conversations/Conversation';import'./chat.css';import Message from'../../components/message/Message';import ChatOnline from'../../components/chatOnline/ChatOnline';import{AuthContext}from'../../context/AuthContext';import{useEffect}from'react';import axios from'axios';import{useRef}from'react';import{io}from'socket.io-client';import CallIcon from'@mui/icons-material/Call';import VideocamIcon from'@mui/icons-material/Videocam';import InfoIcon from'@mui/icons-material/Info';import KeyboardBackspaceIcon from'@mui/icons-material/KeyboardBackspace';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Chat(){var _useState=useState(window.innerWidth),_useState2=_slicedToArray(_useState,2),width=_useState2[0],setWidth=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),single=_useState4[0],setSingle=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentChat=_useState6[0],setCurrentChat=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),conversations=_useState8[0],setConversations=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newMessage=_useState10[0],setNewMessage=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),messages=_useState12[0],setMessages=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),arrivalMessage=_useState14[0],setArrivalMessage=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),onlineUsers=_useState16[0],setOnlineUsers=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),friendImg=_useState18[0],setFriendImg=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),friend=_useState20[0],setFriend=_useState20[1];var _useContext=useContext(AuthContext),user=_useContext.user;var socket=useRef();var scroll=useRef();var PF=process.env.REACT_APP_PUBLIC_FOLDER;var configureChat=function configureChat(conv){setCurrentChat(conv);setSingle(true);};window.addEventListener('resize',function(){setWidth(window.innerWidth);});useEffect(function(){return function(){socket.current.disconnect();};},[]);var checkActive=function checkActive(conv){var friendId=conv.members.find(function(member){return member!==user._id;});return onlineUsers===null||onlineUsers===void 0?void 0:onlineUsers.some(function(u){return u.userId===friendId;});};useEffect(function(){socket.current=io('ws://localhost:4000',{reconnection:false});socket.current.on('getMessage',function(data){setArrivalMessage({sender:data.senderId,text:data.text,createdAt:Date.now()});});},[]);useEffect(function(){var friendId=currentChat===null||currentChat===void 0?void 0:currentChat.members.find(function(member){return member!==user._id;});var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/users?userId='+friendId);case 3:res=_context.sent;setFriend(res.data);setFriendImg(res.data.profilePicture);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();},[currentChat]);useEffect(function(){arrivalMessage&&(currentChat===null||currentChat===void 0?void 0:currentChat.members.includes(arrivalMessage.sender))&&setMessages(function(prev){return[].concat(_toConsumableArray(prev),[arrivalMessage]);});},[arrivalMessage,currentChat]);useEffect(function(){socket.current.emit('addUser',user===null||user===void 0?void 0:user._id);socket.current.on('getUsers',function(users){setOnlineUsers(users);});},[user]);useEffect(function(){var getConversations=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('/conversations/'+(user===null||user===void 0?void 0:user._id));case 3:res=_context2.sent;setConversations(res.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getConversations(){return _ref2.apply(this,arguments);};}();getConversations();},[user._id]);useEffect(function(){var getMessages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get('/messages/'+(currentChat===null||currentChat===void 0?void 0:currentChat._id));case 3:res=_context3.sent;setMessages(res.data);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function getMessages(){return _ref3.apply(this,arguments);};}();getMessages();},[currentChat]);var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){var message,receiverId,res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();if(!(newMessage.length>0)){_context4.next=16;break;}message={sender:user._id,text:newMessage,conversationId:currentChat._id};receiverId=currentChat.members.find(function(member){return member!==user._id;});socket.current.emit('sendMessage',{senderId:user._id,receiverId:receiverId,text:newMessage});_context4.prev=5;_context4.next=8;return axios.post('/messages',message);case 8:res=_context4.sent;setMessages([].concat(_toConsumableArray(messages),[res.data]));setNewMessage('');_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](5);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[5,13]]);}));return function handleSubmit(_x){return _ref4.apply(this,arguments);};}();useEffect(function(){var _scroll$current;(_scroll$current=scroll.current)===null||_scroll$current===void 0?void 0:_scroll$current.scrollIntoView({behavior:'smooth'});},[messages]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatMenu\",style:{display:width<768&&single?'none':'block'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatMenuWrapper\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search for friends\",className:\"chatMenuInput\"}),conversations===null||conversations===void 0?void 0:conversations.map(function(conv){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return configureChat(conv);},children:/*#__PURE__*/_jsx(Conversation,{conversation:conv,currentUser:user,active:checkActive(conv)})},conv._id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chatBox\",style:{display:width<768&&!single?'none':'block'},children:/*#__PURE__*/_jsx(\"div\",{className:\"chatBoxWrapper\",children:currentChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatBoxHeader\",children:[width<768&&single&&/*#__PURE__*/_jsx(KeyboardBackspaceIcon,{onClick:function onClick(){return setSingle(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"cImgContainer\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(friend===null||friend===void 0?void 0:friend.username),children:/*#__PURE__*/_jsx(\"img\",{className:\"cHeaderImg\",src:friendImg?PF+friendImg:PF+'person/noAvatar.png'})}),/*#__PURE__*/_jsx(\"div\",{className:\"iHeader\",children:checkActive(currentChat)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"activeBadge\"}),/*#__PURE__*/_jsx(\"div\",{className:\"hUsername\",children:friend===null||friend===void 0?void 0:friend.username}),/*#__PURE__*/_jsx(\"div\",{className:\"active\",children:\"Active now\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hUsername\",children:friend===null||friend===void 0?void 0:friend.username}),/*#__PURE__*/_jsx(\"div\",{className:\"active\",children:\"Away\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hIcon\",children:[/*#__PURE__*/_jsx(CallIcon,{}),/*#__PURE__*/_jsx(VideocamIcon,{}),/*#__PURE__*/_jsx(InfoIcon,{})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatBoxTop\",children:messages===null||messages===void 0?void 0:messages.map(function(message){return/*#__PURE__*/_jsx(\"div\",{ref:scroll,children:/*#__PURE__*/_jsx(Message,{friendImg:friendImg,userImg:user.profilePicture,message:message,own:message.sender===user._id})},message._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatBoxBottom\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"chatMessageInput\",placeholder:\"Write a message...\",onChange:function onChange(e){return setNewMessage(e.target.value);},value:newMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"chatSubmitButton\",onClick:handleSubmit,children:\"Send\"})]}),' ']}):/*#__PURE__*/_jsx(\"span\",{className:\"noConversationText\",children:\"Open a conversation to start a chat\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"chatOnline\",style:{display:width<768&&single?'none':'block'},children:/*#__PURE__*/_jsx(\"div\",{className:\"chatOnlineWrapper\",children:/*#__PURE__*/_jsx(ChatOnline,{onlineUsers:onlineUsers,currentId:user._id,setCurrentChat:configureChat,user:user})})})]})]});}","map":{"version":3,"names":["React","useContext","useState","Header","Conversation","Message","ChatOnline","AuthContext","useEffect","axios","useRef","io","CallIcon","VideocamIcon","InfoIcon","KeyboardBackspaceIcon","Link","Chat","window","innerWidth","width","setWidth","single","setSingle","currentChat","setCurrentChat","conversations","setConversations","newMessage","setNewMessage","messages","setMessages","arrivalMessage","setArrivalMessage","onlineUsers","setOnlineUsers","friendImg","setFriendImg","friend","setFriend","user","socket","scroll","PF","process","env","REACT_APP_PUBLIC_FOLDER","configureChat","conv","addEventListener","current","disconnect","checkActive","friendId","members","find","member","_id","some","u","userId","reconnection","on","data","sender","senderId","text","createdAt","Date","now","getUser","get","res","profilePicture","includes","prev","emit","users","getConversations","console","log","getMessages","handleSubmit","e","preventDefault","length","message","conversationId","receiverId","post","scrollIntoView","behavior","display","map","username","target","value"],"sources":["C:/Users/AKAKI/SocialMedia/client/src/pages/chat/Chat.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport Header from '../../components/header/Header';\r\nimport Conversation from '../../components/conversations/Conversation';\r\nimport './chat.css';\r\nimport Message from '../../components/message/Message';\r\nimport ChatOnline from '../../components/chatOnline/ChatOnline';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport CallIcon from '@mui/icons-material/Call';\r\nimport VideocamIcon from '@mui/icons-material/Videocam';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport KeyboardBackspaceIcon from '@mui/icons-material/KeyboardBackspace';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Chat() {\r\n  const [width, setWidth] = useState(window.innerWidth);\r\n  const [single, setSingle] = useState(false);\r\n  const [currentChat, setCurrentChat] = useState(null);\r\n  const [conversations, setConversations] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [arrivalMessage, setArrivalMessage] = useState(null);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [friendImg, setFriendImg] = useState(null);\r\n  const [friend, setFriend] = useState(null);\r\n  const { user } = useContext(AuthContext);\r\n  const socket = useRef();\r\n  const scroll = useRef();\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  const configureChat = (conv) => {\r\n    setCurrentChat(conv);\r\n    setSingle(true);\r\n  };\r\n\r\n  window.addEventListener('resize', () => {\r\n    setWidth(window.innerWidth);\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.current.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const checkActive = (conv) => {\r\n    const friendId = conv.members.find((member) => member !== user._id);\r\n    return onlineUsers?.some((u) => u.userId === friendId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.current = io('ws://localhost:4000', { reconnection: false });\r\n    socket.current.on('getMessage', (data) => {\r\n      setArrivalMessage({\r\n        sender: data.senderId,\r\n        text: data.text,\r\n        createdAt: Date.now(),\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const friendId = currentChat?.members.find((member) => member !== user._id);\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get('/users?userId=' + friendId);\r\n        setFriend(res.data);\r\n        setFriendImg(res.data.profilePicture);\r\n      } catch (error) {}\r\n    };\r\n    getUser();\r\n  }, [currentChat]);\r\n\r\n  useEffect(() => {\r\n    arrivalMessage &&\r\n      currentChat?.members.includes(arrivalMessage.sender) &&\r\n      setMessages((prev) => [...prev, arrivalMessage]);\r\n  }, [arrivalMessage, currentChat]);\r\n\r\n  useEffect(() => {\r\n    socket.current.emit('addUser', user?._id);\r\n    socket.current.on('getUsers', (users) => {\r\n      setOnlineUsers(users);\r\n    });\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    const getConversations = async () => {\r\n      try {\r\n        const res = await axios.get('/conversations/' + user?._id);\r\n        setConversations(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getConversations();\r\n  }, [user._id]);\r\n\r\n  useEffect(() => {\r\n    const getMessages = async () => {\r\n      try {\r\n        const res = await axios.get('/messages/' + currentChat?._id);\r\n        setMessages(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getMessages();\r\n  }, [currentChat]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (newMessage.length > 0) {\r\n      const message = {\r\n        sender: user._id,\r\n        text: newMessage,\r\n        conversationId: currentChat._id,\r\n      };\r\n\r\n      const receiverId = currentChat.members.find(\r\n        (member) => member !== user._id\r\n      );\r\n\r\n      socket.current.emit('sendMessage', {\r\n        senderId: user._id,\r\n        receiverId,\r\n        text: newMessage,\r\n      });\r\n\r\n      try {\r\n        const res = await axios.post('/messages', message);\r\n        setMessages([...messages, res.data]);\r\n        setNewMessage('');\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    scroll.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className='chat'>\r\n        <div\r\n          className='chatMenu'\r\n          style={{ display: width < 768 && single ? 'none' : 'block' }}\r\n        >\r\n          <div className='chatMenuWrapper'>\r\n            <input placeholder='Search for friends' className='chatMenuInput' />\r\n            {conversations?.map((conv) => (\r\n              <div key={conv._id} onClick={() => configureChat(conv)}>\r\n                <Conversation\r\n                  conversation={conv}\r\n                  currentUser={user}\r\n                  active={checkActive(conv)}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div\r\n          className='chatBox'\r\n          style={{ display: width < 768 && !single ? 'none' : 'block' }}\r\n        >\r\n          <div className='chatBoxWrapper'>\r\n            {currentChat ? (\r\n              <>\r\n                <div className='chatBoxHeader'>\r\n                  {width < 768 && single && (\r\n                    <KeyboardBackspaceIcon onClick={() => setSingle(false)} />\r\n                  )}\r\n                  <div className='cImgContainer'>\r\n                    <Link to={`/profile/${friend?.username}`}>\r\n                      <img\r\n                        className='cHeaderImg'\r\n                        src={\r\n                          friendImg\r\n                            ? PF + friendImg\r\n                            : PF + 'person/noAvatar.png'\r\n                        }\r\n                      />\r\n                    </Link>\r\n                    <div className='iHeader'>\r\n                      {checkActive(currentChat) ? (\r\n                        <>\r\n                          <div className='activeBadge'></div>\r\n                          <div className='hUsername'>{friend?.username}</div>\r\n                          <div className='active'>Active now</div>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <div className='hUsername'>{friend?.username}</div>\r\n                          <div className='active'>Away</div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                    <div className='hIcon'>\r\n                      <CallIcon />\r\n                      <VideocamIcon />\r\n                      <InfoIcon />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className='chatBoxTop'>\r\n                  {messages?.map((message) => (\r\n                    <div ref={scroll} key={message._id}>\r\n                      <Message\r\n                        friendImg={friendImg}\r\n                        userImg={user.profilePicture}\r\n                        message={message}\r\n                        own={message.sender === user._id}\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className='chatBoxBottom'>\r\n                  <textarea\r\n                    className='chatMessageInput'\r\n                    placeholder='Write a message...'\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    value={newMessage}\r\n                  ></textarea>\r\n                  <button className='chatSubmitButton' onClick={handleSubmit}>\r\n                    Send\r\n                  </button>\r\n                </div>{' '}\r\n              </>\r\n            ) : (\r\n              <span className='noConversationText'>\r\n                Open a conversation to start a chat\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div\r\n          className='chatOnline'\r\n          style={{ display: width < 768 && single ? 'none' : 'block' }}\r\n        >\r\n          <div className='chatOnlineWrapper'>\r\n            <ChatOnline\r\n              onlineUsers={onlineUsers}\r\n              currentId={user._id}\r\n              setCurrentChat={configureChat}\r\n              user={user}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}