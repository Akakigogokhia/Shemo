{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./share.css';import RoomIcon from'@mui/icons-material/Room';import EmojiEmotionsOutlinedIcon from'@mui/icons-material/EmojiEmotionsOutlined';import{useContext,useRef,useState}from'react';import{AuthContext}from'../../context/AuthContext';import axios from'axios';import CameraAltIcon from'@mui/icons-material/CameraAlt';import CancelIcon from'@mui/icons-material/Cancel';import SendIcon from'@mui/icons-material/Send';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var user=JSON.parse(localStorage.getItem('user'));var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newPost,data,fileName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value};if(!file){_context.next=15;break;}data=new FormData();fileName=Date.now()+file.name;data.append('name',fileName);data.append('file',file);newPost.img=fileName;_context.prev=8;_context.next=11;return axios.post('/upload',data);case 11:_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);case 15:_context.prev=15;_context.next=18;return axios.post('/posts',newPost);case 18:window.location.reload();_context.next=23;break;case 21:_context.prev=21;_context.t1=_context[\"catch\"](15);case 23:case\"end\":return _context.stop();}}},_callee,null,[[8,13],[15,21]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareProfileImg\",src:user.profilePicture?PF+user.profilePicture:PF+'person/noAvatar.png',alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \".concat(user.username.split(' ')[0],\"?\"),className:\"shareInput\",ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),file&&/*#__PURE__*/_jsxs(\"div\",{className:\"shareImgContainer\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),className:\"shareImg\"}),/*#__PURE__*/_jsx(CancelIcon,{className:\"shareCancelImg\",onClick:function onClick(){return setFile(null);}})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(CameraAltIcon,{className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo/Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:'none'},type:\"file\",id:\"file\",accept:\".png, .jpeg, .jpg, .gif\",onChange:function onChange(e){setFile(e.target.files[0]);},onClick:function onClick(e){e.target.value='';}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(RoomIcon,{htmlColor:\"brown\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotionsOutlinedIcon,{htmlColor:\"goldenrod\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feeling/Activity\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"shareButton\",children:[\"Post \",/*#__PURE__*/_jsx(SendIcon,{style:{width:'15px'}})]})]})]})});}","map":{"version":3,"names":["RoomIcon","EmojiEmotionsOutlinedIcon","useContext","useRef","useState","AuthContext","axios","CameraAltIcon","CancelIcon","SendIcon","Share","user","JSON","parse","localStorage","getItem","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","fileName","Date","now","name","append","img","post","window","location","reload","profilePicture","username","split","URL","createObjectURL","display","target","files","width"],"sources":["C:/Users/AKAKI/SocialMedia/client/src/components/share/Share.jsx"],"sourcesContent":["import './share.css';\r\nimport RoomIcon from '@mui/icons-material/Room';\r\nimport EmojiEmotionsOutlinedIcon from '@mui/icons-material/EmojiEmotionsOutlined';\r\nimport { useContext, useRef, useState } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport axios from 'axios';\r\nimport CameraAltIcon from '@mui/icons-material/CameraAlt';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport SendIcon from '@mui/icons-material/Send';\r\n\r\nexport default function Share() {\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const desc = useRef();\r\n  const [file, setFile] = useState(null);\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      userId: user._id,\r\n      desc: desc.current.value,\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      const fileName = Date.now() + file.name;\r\n      data.append('name', fileName);\r\n      data.append('file', file);\r\n      newPost.img = fileName;\r\n      try {\r\n        await axios.post('/upload', data);\r\n      } catch (err) {}\r\n    }\r\n    try {\r\n      await axios.post('/posts', newPost);\r\n      window.location.reload();\r\n    } catch (err) {}\r\n  };\r\n  return (\r\n    <div className='share'>\r\n      <div className='shareWrapper'>\r\n        <div className='shareTop'>\r\n          <img\r\n            className='shareProfileImg'\r\n            src={\r\n              user.profilePicture\r\n                ? PF + user.profilePicture\r\n                : PF + 'person/noAvatar.png'\r\n            }\r\n            alt=''\r\n          />\r\n          <input\r\n            placeholder={`What's in your mind ${user.username.split(' ')[0]}?`}\r\n            className='shareInput'\r\n            ref={desc}\r\n          />\r\n        </div>\r\n        <hr className='shareHr' />\r\n        {file && (\r\n          <div className='shareImgContainer'>\r\n            <img src={URL.createObjectURL(file)} className='shareImg' />\r\n            <CancelIcon\r\n              className='shareCancelImg'\r\n              onClick={() => setFile(null)}\r\n            />\r\n          </div>\r\n        )}\r\n        <form className='shareBottom' onSubmit={submitHandler}>\r\n          <div className='shareOptions'>\r\n            <label htmlFor='file' className='shareOption'>\r\n              <CameraAltIcon className='shareIcon' />\r\n              <span className='shareOptionText'>Photo/Video</span>\r\n              <input\r\n                style={{ display: 'none' }}\r\n                type='file'\r\n                id='file'\r\n                accept='.png, .jpeg, .jpg, .gif'\r\n                onChange={(e) => {\r\n                  setFile(e.target.files[0]);\r\n                }}\r\n                onClick={(e) => {\r\n                  e.target.value = '';\r\n                }}\r\n              />\r\n            </label>\r\n            <div className='shareOption'>\r\n              <RoomIcon htmlColor='brown' className='shareIcon' />\r\n              <span className='shareOptionText'>Location</span>\r\n            </div>\r\n            <div className='shareOption'>\r\n              <EmojiEmotionsOutlinedIcon\r\n                htmlColor='goldenrod'\r\n                className='shareIcon'\r\n              />\r\n              <span className='shareOptionText'>Feeling/Activity</span>\r\n            </div>\r\n          </div>\r\n          <button type='submit' className='shareButton'>\r\n            Post {<SendIcon style={{ width: '15px' }} />}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"qXAAA,MAAO,aAAa,CACpB,MAAOA,SAAQ,KAAM,0BAA0B,CAC/C,MAAOC,0BAAyB,KAAM,2CAA2C,CACjF,OAASC,UAAU,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACpD,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,cAAa,KAAM,+BAA+B,CACzD,MAAOC,WAAU,KAAM,4BAA4B,CACnD,MAAOC,SAAQ,KAAM,0BAA0B,CAAC,wFAEhD,cAAe,SAASC,MAAK,EAAG,CAC9B,GAAMC,KAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,GAAMC,GAAE,CAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB,CAC9C,GAAMC,KAAI,CAAGjB,MAAM,EAAE,CACrB,cAAwBC,QAAQ,CAAC,IAAI,CAAC,wCAA/BiB,IAAI,eAAEC,OAAO,eAEpB,GAAMC,cAAa,4FAAG,iBAAOC,CAAC,8IAC5BA,CAAC,CAACC,cAAc,EAAE,CACZC,OAAO,CAAG,CACdC,MAAM,CAAEhB,IAAI,CAACiB,GAAG,CAChBR,IAAI,CAAEA,IAAI,CAACS,OAAO,CAACC,KACrB,CAAC,KACGT,IAAI,0BACAU,IAAI,CAAG,GAAIC,SAAQ,EAAE,CACrBC,QAAQ,CAAGC,IAAI,CAACC,GAAG,EAAE,CAAGd,IAAI,CAACe,IAAI,CACvCL,IAAI,CAACM,MAAM,CAAC,MAAM,CAAEJ,QAAQ,CAAC,CAC7BF,IAAI,CAACM,MAAM,CAAC,MAAM,CAAEhB,IAAI,CAAC,CACzBK,OAAO,CAACY,GAAG,CAAGL,QAAQ,CAAC,uCAEf3B,MAAK,CAACiC,IAAI,CAAC,SAAS,CAAER,IAAI,CAAC,0IAI7BzB,MAAK,CAACiC,IAAI,CAAC,QAAQ,CAAEb,OAAO,CAAC,SACnCc,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAAC,+JAE5B,kBApBKnB,cAAa,4CAoBlB,CACD,mBACE,YAAK,SAAS,CAAC,OAAO,uBACpB,aAAK,SAAS,CAAC,cAAc,wBAC3B,aAAK,SAAS,CAAC,UAAU,wBACvB,YACE,SAAS,CAAC,iBAAiB,CAC3B,GAAG,CACDZ,IAAI,CAACgC,cAAc,CACf3B,EAAE,CAAGL,IAAI,CAACgC,cAAc,CACxB3B,EAAE,CAAG,qBACV,CACD,GAAG,CAAC,EAAE,EACN,cACF,cACE,WAAW,+BAAyBL,IAAI,CAACiC,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAI,CACnE,SAAS,CAAC,YAAY,CACtB,GAAG,CAAEzB,IAAK,EACV,GACE,cACN,WAAI,SAAS,CAAC,SAAS,EAAG,CACzBC,IAAI,eACH,aAAK,SAAS,CAAC,mBAAmB,wBAChC,YAAK,GAAG,CAAEyB,GAAG,CAACC,eAAe,CAAC1B,IAAI,CAAE,CAAC,SAAS,CAAC,UAAU,EAAG,cAC5D,KAAC,UAAU,EACT,SAAS,CAAC,gBAAgB,CAC1B,OAAO,CAAE,yBAAMC,QAAO,CAAC,IAAI,CAAC,EAAC,EAC7B,GAEL,cACD,cAAM,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAEC,aAAc,wBACpD,aAAK,SAAS,CAAC,cAAc,wBAC3B,eAAO,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,wBAC3C,KAAC,aAAa,EAAC,SAAS,CAAC,WAAW,EAAG,cACvC,aAAM,SAAS,CAAC,iBAAiB,yBAAmB,cACpD,cACE,KAAK,CAAE,CAAEyB,OAAO,CAAE,MAAO,CAAE,CAC3B,IAAI,CAAC,MAAM,CACX,EAAE,CAAC,MAAM,CACT,MAAM,CAAC,yBAAyB,CAChC,QAAQ,CAAE,kBAACxB,CAAC,CAAK,CACfF,OAAO,CAACE,CAAC,CAACyB,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5B,CAAE,CACF,OAAO,CAAE,iBAAC1B,CAAC,CAAK,CACdA,CAAC,CAACyB,MAAM,CAACnB,KAAK,CAAG,EAAE,CACrB,CAAE,EACF,GACI,cACR,aAAK,SAAS,CAAC,aAAa,wBAC1B,KAAC,QAAQ,EAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW,EAAG,cACpD,aAAM,SAAS,CAAC,iBAAiB,sBAAgB,GAC7C,cACN,aAAK,SAAS,CAAC,aAAa,wBAC1B,KAAC,yBAAyB,EACxB,SAAS,CAAC,WAAW,CACrB,SAAS,CAAC,WAAW,EACrB,cACF,aAAM,SAAS,CAAC,iBAAiB,8BAAwB,GACrD,GACF,cACN,gBAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,gCACrC,KAAC,QAAQ,EAAC,KAAK,CAAE,CAAEqB,KAAK,CAAE,MAAO,CAAE,EAAG,GACrC,GACJ,GACH,EACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}