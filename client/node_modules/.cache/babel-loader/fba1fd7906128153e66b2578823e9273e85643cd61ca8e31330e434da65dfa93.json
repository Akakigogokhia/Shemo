{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AKAKI/SocialMedia/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Post from'../post/Post';import Share from'../share/Share';import'./feed.css';import{useContext,useEffect,useState}from'react';import axios from'axios';import{AuthContext}from'../../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Feed(_ref){var username=_ref.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!username){_context.next=6;break;}_context.next=3;return axios.get('/posts/profile/'+username);case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"posts/timeline/\".concat(user._id));case 8:_context.t0=_context.sent;case 9:res=_context.t0;setPosts(res.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 11:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();fetchPosts();},[username]);return/*#__PURE__*/_jsx(\"div\",{className:\"feed\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"feedWrapper\",children:[username?username===user.username&&/*#__PURE__*/_jsx(Share,{}):/*#__PURE__*/_jsx(Share,{}),posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]})});}","map":{"version":3,"names":["Post","Share","useContext","useEffect","useState","axios","AuthContext","Feed","username","posts","setPosts","user","fetchPosts","get","_id","res","data","sort","p1","p2","Date","createdAt","map","p"],"sources":["C:/Users/AKAKI/SocialMedia/client/src/components/feed/Feed.jsx"],"sourcesContent":["import Post from '../post/Post';\r\nimport Share from '../share/Share';\r\nimport './feed.css';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function Feed({ username }) {\r\n  const [posts, setPosts] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      const res = username\r\n        ? await axios.get('/posts/profile/' + username)\r\n        : await axios.get(`posts/timeline/${user._id}`);\r\n      setPosts(\r\n        res.data.sort((p1, p2) => {\r\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n        })\r\n      );\r\n    };\r\n    fetchPosts();\r\n  }, [username]);\r\n\r\n  return (\r\n    <div className='feed'>\r\n      <div className='feedWrapper'>\r\n        {username ? username === user.username && <Share /> : <Share />}\r\n        {posts.map((p) => (\r\n          <Post key={p._id} post={p} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"qXAAA,MAAOA,KAAI,KAAM,cAAc,CAC/B,MAAOC,MAAK,KAAM,gBAAgB,CAClC,MAAO,YAAY,CACnB,OAASC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,2BAA2B,CAAC,wFAExD,cAAe,SAASC,KAAI,MAAe,IAAZC,SAAQ,MAARA,QAAQ,CACrC,cAA0BJ,QAAQ,CAAC,EAAE,CAAC,wCAA/BK,KAAK,eAAEC,QAAQ,eACtB,gBAAiBR,UAAU,CAACI,WAAW,CAAC,CAAhCK,IAAI,aAAJA,IAAI,CAEZR,SAAS,CAAC,UAAM,CACd,GAAMS,WAAU,6FAAG,iJACLJ,QAAQ,+CACVH,MAAK,CAACQ,GAAG,CAAC,iBAAiB,CAAGL,QAAQ,CAAC,qFACvCH,MAAK,CAACQ,GAAG,0BAAmBF,IAAI,CAACG,GAAG,EAAG,yCAF3CC,GAAG,aAGTL,QAAQ,CACNK,GAAG,CAACC,IAAI,CAACC,IAAI,CAAC,SAACC,EAAE,CAAEC,EAAE,CAAK,CACxB,MAAO,IAAIC,KAAI,CAACD,EAAE,CAACE,SAAS,CAAC,CAAG,GAAID,KAAI,CAACF,EAAE,CAACG,SAAS,CAAC,CACxD,CAAC,CAAC,CACH,CAAC,uDACH,kBATKT,WAAU,2CASf,CACDA,UAAU,EAAE,CACd,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,mBACE,YAAK,SAAS,CAAC,MAAM,uBACnB,aAAK,SAAS,CAAC,aAAa,WACzBA,QAAQ,CAAGA,QAAQ,GAAKG,IAAI,CAACH,QAAQ,eAAI,KAAC,KAAK,IAAG,cAAG,KAAC,KAAK,IAAG,CAC9DC,KAAK,CAACa,GAAG,CAAC,SAACC,CAAC,qBACX,KAAC,IAAI,EAAa,IAAI,CAAEA,CAAE,EAAfA,CAAC,CAACT,GAAG,CAAa,EAC9B,CAAC,GACE,EACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}